---
title: "Predict player scores"
author: "Tom Conway"
format: 
  gfm: default
  html:
    embed-resources: true
editor: visual
---

## Predict player scores

-   Set up required libraries and import csvs - requires running of both get-data and predict-scores

```{r}
#| label: set-up
#| include: false

#Set up libraries required in addition to what is in get data

library(tidyverse)
library(tidymodels)

# Import required data

predict_future_rows <- read_csv("processed_data/predict_future_rows.csv")
fpl_elements <- read_csv("processed_data/fpl_elements.csv")
vaastav_2025 <- read_csv(vaastav_2025,"processed_data/vaastav_2025.csv")
```

-   Format player data - use FPL API data as a base

```{r}
#| label: player-data

# Lots of data in the fpl_elements tab - for now we need name, ID, element type, team_code, now_cost. Might come back for other data.
player_data <- fpl_elements |>
  select(
    first_name, second_name, web_name, id, element_type, team_code, now_cost
  )

```

-   Bring in goals scored stats from worldfootballR

-   

-   And matches played in stats from the same source

-   Create an estimate of proportion of goals scored, and proportion of games played in for each player in each team

-   Model different kinds of player scores by role:

    -   Goalkeeper - played + clean sheets

    -   Defender - played + clean sheets + goals + assists

    -   Midfielder - played + clean sheets + goals + assists

    -   Striker - played + goals + assists

-   Prediction for each player score for upcoming games, including an exponential backoff weighting.
